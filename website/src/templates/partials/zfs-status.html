{% if d.zfs %}
  <div class="zfs-status-block">
    {# Overall state line #}
    <p class="zfs-state" data-lang="en">
      State:
      <strong class="{{ 'zfs-status-ok' if d.zfs.healthy else 'zfs-status-bad' }}">
        {{ d.zfs.state }}
      </strong>
    </p>
    <p class="zfs-state" data-lang="cs">
      Stav:
      <strong class="{{ 'zfs-status-ok' if d.zfs.healthy else 'zfs-status-bad' }}">
        {{ d.zfs.state }}
      </strong>
    </p>

    {# Status / action - show only if interesting, style as warning when not healthy #}
    {% if d.zfs.status %}
      <p
        class="zfs-status-text {{ 'zfs-warning' if not d.zfs.healthy else 'zfs-info' }}"
        data-lang="en"
      >
        {{ d.zfs.status }}
      </p>
      <p
        class="zfs-status-text {{ 'zfs-warning' if not d.zfs.healthy else 'zfs-info' }}"
        data-lang="cs"
      >
        {{ d.zfs.status }}
      </p>
    {% endif %}

    {% if d.zfs.action %}
      <p class="zfs-action zfs-warning" data-lang="en">
        Suggested action: {{ d.zfs.action }}
      </p>
      <p class="zfs-action zfs-warning" data-lang="cs">
        Doporučený postup: {{ d.zfs.action }}
      </p>
    {% endif %}

    {# Scrub info is informational, not good/bad on its own #}
    {% if d.zfs.scrub %}
      <p class="zfs-scrub zfs-info" data-lang="en">
        Last scrub: {{ d.zfs.scrub }}
      </p>
      <p class="zfs-scrub zfs-info" data-lang="cs">
        Poslední scrub: {{ d.zfs.scrub }}
      </p>
    {% endif %}

    {# Per-device problems - always highlight as bad, not notes #}
    {% if d.zfs.bad_devices %}
      <ul class="zfs-devices zfs-error-list">
        {% for dev in d.zfs.bad_devices %}
          <li class="zfs-device-bad" data-lang="en">
            Device {{ dev.name }}:
            <span class="zfs-status-bad">{{ dev.state }}</span>
            (R {{ dev.read }}, W {{ dev.write }}, CKSUM {{ dev.cksum }})
          </li>
          <li class="zfs-device-bad" data-lang="cs">
            Zařízení {{ dev.name }}:
            <span class="zfs-status-bad">{{ dev.state }}</span>
            (čtení {{ dev.read }}, zápis {{ dev.write }}, CKSUM {{ dev.cksum }})
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
{% endif %}
